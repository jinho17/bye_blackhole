{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinkim/jinho_black/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/jinho_black/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jinkim/jinho_black/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import useSwr from'swr';import{useEffect,useState}from\"react\";import\"./styles/SideBar.scss\";import{findImg}from'../Images/Images';import UserInfoModal from\"./UserInfoModal\";import GetChatList from'./GetChatList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SideBar=function SideBar(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),MyID=_useState2[0],setMyID=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),MyIcon=_useState4[0],setMyIcon=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),IntraID=_useState6[0],setIntraID=_useState6[1];useEffect(function(){var intra_id=sessionStorage.getItem('intraID');if(intra_id)setIntraID(intra_id);});var GetMyProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!IntraID){_context.next=9;break;}_context.next=3;return axios.get(url);case 3:res=_context.sent;sessionStorage.setItem('nickname',res.data.id);sessionStorage.setItem('icon',res.data.icon);setMyID(res.data.id);setMyIcon(res.data.icon);//\t\t\tif (res.data.state === 'off')\n//\t\t\t\tdocument.location.href = '/log/in'\nreturn _context.abrupt(\"return\",res.data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function GetMyProfile(_x){return _ref.apply(this,arguments);};}();useSwr('/profile/my?intra_id='+IntraID,GetMyProfile);var fetcher=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!MyID){_context2.next=5;break;}_context2.next=3;return axios.get(url);case 3:res=_context2.sent;return _context2.abrupt(\"return\",res.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetcher(_x2){return _ref2.apply(this,arguments);};}();var _useSwr=useSwr('/Lobby/userList?id='+MyID,fetcher),data=_useSwr.data,error=_useSwr.error,mutate=_useSwr.mutate;//UserInfoModal\nvar _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),TargetID=_useState8[0],setTargetID=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),UserInfoModalState=_useState10[0],setUserInfoModalState=_useState10[1];var openUserInfoModal=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setUserInfoModalState(true);setTargetID(id);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function openUserInfoModal(_x3){return _ref3.apply(this,arguments);};}();var closeUserInfoModal=function closeUserInfoModal(){setUserInfoModalState(false);mutate();};return/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"MyID\",children:MyID}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"myIcon\",onClick:function onClick(){return openUserInfoModal(MyID);},children:/*#__PURE__*/_jsx(\"img\",{src:findImg(MyIcon),width:\"30\",height:\"30\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"# friends\"}),data===null||data===void 0?void 0:data.map(function(user){return user.isFriend?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"user-btn\",onClick:function onClick(){return openUserInfoModal(user.id);},children:[/*#__PURE__*/_jsx(\"img\",{src:findImg(user.icon),width:\"20\",height:\"20\",className:\"user-icon\"}),user.state===\"on\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState online\",children:\"\\xB7\"}):null,user.state===\"off\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState offline\",children:\"\\xB7\"}):null,user.state===\"gaming\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState gaming\",children:\"\\xB7\"}):null,user.id]})}):null;}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"# others\"}),data===null||data===void 0?void 0:data.map(function(user){return user.isFriend?null:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"user-btn\",onClick:function onClick(){return openUserInfoModal(user.id);},children:[/*#__PURE__*/_jsx(\"img\",{src:findImg(user.icon),width:\"20\",height:\"20\",className:\"user-icon\"}),user.state===\"on\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState online\",children:\"\\xB7\"}):null,user.state===\"off\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState offline\",children:\"\\xB7\"}):null,user.state===\"gaming\"?/*#__PURE__*/_jsx(\"span\",{className:\"userState gaming\",children:\"\\xB7\"}):null,user.id]})});}),/*#__PURE__*/_jsx(GetChatList,{myID:MyID}),/*#__PURE__*/_jsx(UserInfoModal,{open:UserInfoModalState,close:closeUserInfoModal,myID:MyID,targetID:TargetID})]})]});};export default SideBar;","map":{"version":3,"sources":["/Users/jinkim/jinho_black/client/src/SideBar/SideBar.tsx"],"names":["axios","useSwr","useEffect","useState","findImg","UserInfoModal","GetChatList","SideBar","MyID","setMyID","MyIcon","setMyIcon","IntraID","setIntraID","intra_id","sessionStorage","getItem","GetMyProfile","url","get","res","setItem","data","id","icon","fetcher","error","mutate","TargetID","setTargetID","UserInfoModalState","setUserInfoModalState","openUserInfoModal","closeUserInfoModal","map","user","isFriend","state"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport useSwr from 'swr';\nimport {useEffect, useState} from \"react\";\nimport \"./styles/SideBar.scss\"\nimport {findImg} from '../Images/Images'\nimport UserInfoModal from \"./UserInfoModal\";\nimport GetChatList from './GetChatList'\n\nconst SideBar = () => {\n\tconst [MyID, setMyID] = useState('')\n\tconst [MyIcon, setMyIcon] = useState('')\n\tconst [IntraID, setIntraID] = useState('')\n\t\n\tuseEffect(() => {\n\t\tconst intra_id = sessionStorage.getItem('intraID')\n\t\tif (intra_id) setIntraID(intra_id)\n\t})\n\n\tconst GetMyProfile = async (url:string) => {\n\t\tif (IntraID)\n\t\t{\n\t\t\tconst res = await axios.get(url)\n\t\t\tsessionStorage.setItem('nickname', res.data.id)\n\t\t\tsessionStorage.setItem('icon', res.data.icon)\n\t\t\tsetMyID(res.data.id)\n\t\t\tsetMyIcon(res.data.icon)\n//\t\t\tif (res.data.state === 'off')\n//\t\t\t\tdocument.location.href = '/log/in'\n\t\t\treturn (res.data)\n\t\t}\n\t}\n\tuseSwr<{id:string, icon:string, state:string}>('/profile/my?intra_id=' + IntraID, GetMyProfile)\n\n\n\tconst fetcher = async (url:string) => {\n\t\tif (MyID)\n\t\t{\n\t\t\tconst res = await axios.get(url)\n\t\t\treturn res.data;\n\t\t}\n\t}\n\n\tconst {data, error, mutate} = useSwr<{id:string, icon:string, state:string, isFriend:boolean}[]>('/Lobby/userList?id=' + MyID, fetcher)\n\n\n\t//UserInfoModal\n\tconst [TargetID, setTargetID] = useState('');\n\tconst [UserInfoModalState, setUserInfoModalState] = useState(false);\n\tconst openUserInfoModal = async(id:string) => {\n\t\tsetUserInfoModalState(true);\n\t\tsetTargetID(id);\n\t}\n\tconst closeUserInfoModal = () => {\n\t\tsetUserInfoModalState(false);\n\t\tmutate()\n\t}\n\n\treturn(\n\t<aside>\n\t\t<div className=\"top\">\n\t\t\t<span className=\"MyID\">{MyID}</span>\n\t\t\t<button type=\"button\" className=\"myIcon\" onClick={() => openUserInfoModal(MyID)}>\n\t\t\t\t<img src={findImg(MyIcon)} width=\"30\" height=\"30\"></img>\n\t\t\t</button>\n\t\t</div>\n\t\t<div className=\"bottom\">\n\t\t\t<div className=\"title\"># friends</div>\n\t\t\t{data?.map(user=> user.isFriend ?\n\t\t\t\t<div>\n\t\t\t\t<button type=\"button\" className=\"user-btn\" onClick={() => openUserInfoModal(user.id)}>\n\t\t\t\t\t<img src={findImg(user.icon)}  width=\"20\" height=\"20\" className=\"user-icon\"/>\n\t\t\t\t\t{user.state === \"on\" ? <span className=\"userState online\">·</span> : null}\n\t\t\t\t\t{user.state === \"off\" ? <span className=\"userState offline\">·</span> : null}\n\t\t\t\t\t{user.state === \"gaming\" ? <span className=\"userState gaming\">·</span> : null}\n\t\t\t\t\t{user.id}\n\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t: null\n\t\t\t)}\n\t\t\t<div className=\"title\"># others</div>\n\t\t\t{data?.map(user => user.isFriend ? null :\n\t\t\t\t<div>\n\t\t\t\t<button type=\"button\" className=\"user-btn\" onClick={() => openUserInfoModal(user.id)}>\n\t\t\t\t\t<img src={findImg(user.icon)}  width=\"20\" height=\"20\" className=\"user-icon\"/>\n\t\t\t\t\t{user.state === \"on\" ? <span className=\"userState online\">·</span> : null}\n\t\t\t\t\t{user.state === \"off\" ? <span className=\"userState offline\">·</span> : null}\n\t\t\t\t\t{user.state === \"gaming\" ? <span className=\"userState gaming\">·</span> : null}\n\t\t\t\t\t{user.id}\n\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t\n\t\t\t<GetChatList myID={MyID}/>\n\n\t\t\t<UserInfoModal open={UserInfoModalState} close={closeUserInfoModal} myID={MyID} targetID={TargetID}/>\n\t\t</div>\n\t</aside>\n\t)\n}\nexport default SideBar;"]},"metadata":{},"sourceType":"module"}