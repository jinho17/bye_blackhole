{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinkim/jinho_black/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/jinho_black/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jinkim/jinho_black/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import\"./styles/UserList.scss\";import{findImg}from'../Images/Images';import crown from'../Images/crown.png';import UserListModal from'./UserListModal';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserList=function UserList(_ref){var users=_ref.users,MyPermission=_ref.MyPermission,getRoomInfoMutate=_ref.getRoomInfoMutate,roomName=_ref.roomName;//UserListModal\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),chatUser=_useState2[0],setChatUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),UserListModalState=_useState4[0],setUserListModalState=_useState4[1];var openUserListModal=function openUserListModal(id){setUserListModalState(true);setChatUser(id);};var closeUserListModal=function closeUserListModal(){setUserListModalState(false);};//owner button\nfunction plusBtn(_x){return _plusBtn.apply(this,arguments);}function _plusBtn(){_plusBtn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var rtn;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('chat/admin?title='+roomName+'&id='+id);case 2:rtn=_context.sent;getRoomInfoMutate();case 4:case\"end\":return _context.stop();}}},_callee);}));return _plusBtn.apply(this,arguments);}function minusBtn(_x2){return _minusBtn.apply(this,arguments);}function _minusBtn(){_minusBtn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var rtn;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete('chat/admin?title='+roomName+'&id='+id);case 2:rtn=_context2.sent;getRoomInfoMutate();case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _minusBtn.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"userList-container\",children:[users===null||users===void 0?void 0:users.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{className:\"userList-box\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"userList-btn\",onClick:function onClick(){return(MyPermission==='owner'||MyPermission==='admin')&&(user.permission==='user'||user.permission==='muted')?openUserListModal(user.id):null;},children:[/*#__PURE__*/_jsxs(\"span\",{className:\"iconBox\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"img\",{src:findImg(user.icon),width:\"30\",height:\"30\",className:\"icon\"})}),/*#__PURE__*/_jsx(\"span\",{children:user.permission==='owner'||user.permission==='admin'?/*#__PURE__*/_jsx(\"img\",{src:crown,width:\"20\",height:\"20\",className:user.permission==='owner'?'crown owner':'crown admin'}):null})]}),/*#__PURE__*/_jsx(\"span\",{className:\"id\",children:user.id})]}),/*#__PURE__*/_jsx(\"span\",{children:MyPermission==='owner'&&(user.permission==='user'||user.permission==='muted')?/*#__PURE__*/_jsx(\"button\",{className:\"owner-plusBtn\",onClick:function onClick(){return plusBtn(user.id);},children:\"+\"}):null}),/*#__PURE__*/_jsx(\"span\",{children:MyPermission==='owner'&&user.permission==='admin'?/*#__PURE__*/_jsx(\"button\",{className:\"owner-xBtn\",onClick:function onClick(){return minusBtn(user.id);},children:\"x\"}):null})]});}),/*#__PURE__*/_jsx(UserListModal,{open:UserListModalState,close:closeUserListModal,targetID:chatUser,roomName:roomName,getRoomInfoMutate:getRoomInfoMutate})]});};export default UserList;","map":{"version":3,"sources":["/Users/jinkim/jinho_black/client/src/Chat/UserList.tsx"],"names":["React","useState","findImg","crown","UserListModal","axios","UserList","users","MyPermission","getRoomInfoMutate","roomName","chatUser","setChatUser","UserListModalState","setUserListModalState","openUserListModal","id","closeUserListModal","plusBtn","get","rtn","minusBtn","delete","map","user","permission","icon"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport \"./styles/UserList.scss\"\nimport {findImg} from '../Images/Images'\nimport crown from '../Images/crown.png'\nimport UserListModal from './UserListModal'\nimport axios from \"axios\";\nimport { mutate } from \"swr\";\n\ninterface IUserList{\n\tsocket:any,\n\tusers: {id:string, permission:string, icon:string}[] | undefined,\n\tMyPermission: string,\n\tgetRoomInfoMutate: any,\n\troomName:string\n}\n\nconst UserList = ({ users, MyPermission, getRoomInfoMutate, roomName } : IUserList) => {\n\t//UserListModal\n\tconst [chatUser, setChatUser] = useState('')\n\tconst [UserListModalState, setUserListModalState] = useState(false);\n\tconst openUserListModal = (id:string) => {\n\t\tsetUserListModalState(true);\n\t\tsetChatUser(id);\n\t}\n\tconst closeUserListModal = () => {\n\t\tsetUserListModalState(false);\n\t}\n\n\t//owner button\n\tasync function plusBtn(id:string){\n\t\tconst rtn = await axios.get('chat/admin?title=' + roomName + '&id=' + id)\n\t\tgetRoomInfoMutate()\n\t}\n\tasync function minusBtn(id:string){\n\t\tconst rtn = await axios.delete('chat/admin?title=' + roomName + '&id=' + id)\n\t\tgetRoomInfoMutate()\n\t}\n\n\treturn (\n\t\t<div className=\"userList-container\">\n\t\t\t{users?.map(user=>\n\t\t\t<div className=\"userList-box\">\n\t\t\t\t<button className=\"userList-btn\" onClick={() => \n\t\t\t\t\t(MyPermission === 'owner' || MyPermission === 'admin') && \n\t\t\t\t\t(user.permission === 'user' || user.permission === 'muted') ? openUserListModal(user.id): null}>\n\t\t\t\t\t<span className=\"iconBox\">\n\t\t\t\t\t\t<span><img src={findImg(user.icon)} width=\"30\" height=\"30\" className=\"icon\"/></span>\n\t\t\t\t\t\t<span>{(user.permission === 'owner' || user.permission === 'admin') ?\n\t\t\t\t\t\t\t<img src={crown} width=\"20\" height=\"20\" className={user.permission === 'owner' ? 'crown owner' : 'crown admin'}/>\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className='id'>{user.id}</span>\n\t\t\t\t</button>\n\t\t\t\t<span>{MyPermission === 'owner' && (user.permission === 'user' || user.permission === 'muted') ?\n\t\t\t\t\t<button className=\"owner-plusBtn\" onClick={() => plusBtn(user.id)}>+</button>\n\t\t\t\t\t: null\n\t\t\t\t}</span>\n\t\t\t\t<span>{MyPermission === 'owner' && user.permission === 'admin' ?\n\t\t\t\t\t<button className=\"owner-xBtn\" onClick={() => minusBtn(user.id)}>x</button>\n\t\t\t\t\t: null\n\t\t\t\t}</span>\n\t\t\t</div>\n\t\t\t)}\n\t\t\t<UserListModal open={UserListModalState} close={closeUserListModal} targetID={chatUser} roomName={roomName} getRoomInfoMutate={getRoomInfoMutate}></UserListModal>\n\t\t</div>\n\n\t);\n  };\n  export default UserList;\n"]},"metadata":{},"sourceType":"module"}